<div class="forgot-password-container">
  <div class="form-header text-center">
    <h2>Quên mật khẩu</h2>
    <p>Vui lòng làm theo hướng dẫn để đặt lại mật khẩu</p>
  </div>

  <!-- Step indicator -->
  <div class="step-indicator">
    <div class="step" [class.active]="step===1" [class.completed]="step>1">
      <div class="step-number">1</div>
      <div class="step-text">Nhập email</div>
    </div>
    <div class="step" [class.active]="step===2" [class.completed]="step>2">
      <div class="step-number">2</div>
      <div class="step-text">Xác thực OTP</div>
    </div>
    <div class="step" [class.active]="step===3">
      <div class="step-number">3</div>
      <div class="step-text">Mật khẩu mới</div>
    </div>
  </div>

  <!-- Step 1 -->
  <form *ngIf="step===1" [formGroup]="emailForm" (ngSubmit)="sendOtp()">
    <div class="form-group">
      <label>Email</label>
      <input type="email" formControlName="email" class="form-control">
      <div class="text-danger" *ngIf="emailForm.get('email')?.invalid && emailForm.get('email')?.touched">
        Vui lòng nhập email hợp lệ
      </div>
    </div>
    <button type="submit" class="btn btn-primary w-100" [disabled]="loading">Gửi mã OTP</button>
  </form>

  <!-- Step 2 -->
  <form *ngIf="step===2" [formGroup]="otpForm" (ngSubmit)="verifyOtp()">
    <div class="form-group">
      <label>OTP</label>
      <input type="text" formControlName="otp" class="form-control">
      <div class="text-danger" *ngIf="otpForm.get('otp')?.invalid && otpForm.get('otp')?.touched">
        OTP phải gồm 6 chữ số
      </div>
    </div>
    <div class="countdown">OTP hết hạn trong: {{timer}}</div>
    <a href="#" (click)="resendOtp()">Gửi lại OTP</a>
    <button type="submit" class="btn btn-primary w-100 mt-2" [disabled]="loading">Xác thực OTP</button>
  </form>

  <!-- Step 3 -->
  <form *ngIf="step===3" [formGroup]="resetForm" (ngSubmit)="resetPassword()">
    <div class="form-group">
      <label>Mật khẩu mới</label>
      <input type="password" formControlName="newPassword" class="form-control">
    </div>
    <div class="form-group">
      <label>Xác nhận mật khẩu</label>
      <input type="password" formControlName="confirmPassword" class="form-control">
      <div class="text-danger" *ngIf="resetForm.errors?.['notMatch'] && resetForm.get('confirmPassword')?.touched">
        Mật khẩu không khớp
      </div>
    </div>
    <button type="submit" class="btn btn-success w-100" [disabled]="loading">Đặt lại mật khẩu</button>
  </form>
</div>
